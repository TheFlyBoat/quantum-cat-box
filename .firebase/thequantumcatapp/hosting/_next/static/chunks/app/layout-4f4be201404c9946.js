(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{485:(e,t,s)=>{"use strict";s.d(t,{FeedbackProvider:()=>l,j:()=>d});var n=s(5155),r=s(2115),o=s(5110),i=s(1162);let a=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,{user:s,userData:l,setUserData:d,storageMode:u}=(0,o.A)(),c=(0,r.useMemo)(()=>{var e,t,s,n,r,o,a,d,u,c,v,m,b;let f=null!=(r=i.nb.settings)?r:{soundEnabled:!0,vibrationEnabled:!0,volume:.5,reduceMotion:!1};return{soundEnabled:null==(a=null!=(o=null==l||null==(e=l.settings)?void 0:e.soundEnabled)?o:f.soundEnabled)||a,vibrationEnabled:null==(u=null!=(d=null==l||null==(t=l.settings)?void 0:t.vibrationEnabled)?d:f.vibrationEnabled)||u,volume:null!=(v=null!=(c=null==l||null==(s=l.settings)?void 0:s.volume)?c:f.volume)?v:.5,reduceMotion:null!=(b=null!=(m=null==l||null==(n=l.settings)?void 0:n.reduceMotion)?m:f.reduceMotion)&&b}},[l]),v=(0,r.useCallback)(e=>{d(t=>{let s=null!=t?t:{...i.nb};return{...s,settings:{...s.settings,soundEnabled:e}}}),"cloud"===u&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{settings:{soundEnabled:e}}),localStorage.setItem("quantum-cat-sound-enabled",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[d,u,s]),m=(0,r.useCallback)(e=>{d(t=>{let s=null!=t?t:{...i.nb};return{...s,settings:{...s.settings,vibrationEnabled:e}}}),"cloud"===u&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{settings:{vibrationEnabled:e}}),localStorage.setItem("quantum-cat-vibration-enabled",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[d,u,s]),b=(0,r.useCallback)(e=>{d(t=>{let s=null!=t?t:{...i.nb};return{...s,settings:{...s.settings,volume:e}}}),"cloud"===u&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{settings:{volume:e}}),localStorage.setItem("quantum-cat-volume",e.toString()),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[d,u,s]),f=(0,r.useCallback)(e=>{d(t=>{let s=null!=t?t:{...i.nb};return{...s,settings:{...s.settings,reduceMotion:e}}}),"cloud"===u&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{settings:{reduceMotion:e}}),localStorage.setItem("quantum-cat-reduce-motion",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[d,u,s]);return(0,n.jsx)(a.Provider,{value:{soundEnabled:c.soundEnabled,setSoundEnabled:v,vibrationEnabled:c.vibrationEnabled,setVibrationEnabled:m,volume:c.volume,setVolume:b,reduceMotion:c.reduceMotion,setReduceMotion:f},children:t})},d=()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("useFeedback must be used within a FeedbackProvider");return e}},1458:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>o});var n=s(5155);s(2115);var r=s(5379);function o(e){let{children:t,...s}=e;return(0,n.jsx)(r.N,{...s,themes:["light","dark","aurora","sunrise","forest","celestial","retro"],children:t})}},1629:(e,t,s)=>{"use strict";s.d(t,{P:()=>d,PointsProvider:()=>l});var n=s(5155),r=s(2115),o=s(5110),i=s(1162);let a=(0,r.createContext)(void 0),l=e=>{var t;let{children:s}=e,{user:l,userData:d,setUserData:u,storageMode:c}=(0,o.A)(),v=null!=(t=null==d?void 0:d.points)?t:0,m=(0,r.useCallback)((e,t)=>{let s=v+e;u(e=>({...null!=e?e:i.nb,points:s})),"cloud"===c&&l&&"guest"!==l&&(0,i.Ts)(l.uid,{points:s})},[v,u,c,l]),b=(0,r.useCallback)(e=>{m(-e)},[m]);return(0,n.jsx)(a.Provider,{value:{points:v,addPoints:m,spendPoints:b},children:s})},d=()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("usePoints must be used within a PointsProvider");return e}},2690:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3673,23)),Promise.resolve().then(s.t.bind(s,1004,23)),Promise.resolve().then(s.t.bind(s,3883,23)),Promise.resolve().then(s.t.bind(s,4231,23)),Promise.resolve().then(s.bind(s,1458)),Promise.resolve().then(s.bind(s,8516)),Promise.resolve().then(s.bind(s,5110)),Promise.resolve().then(s.bind(s,9937)),Promise.resolve().then(s.bind(s,3187)),Promise.resolve().then(s.bind(s,5395)),Promise.resolve().then(s.bind(s,3961)),Promise.resolve().then(s.bind(s,9225)),Promise.resolve().then(s.bind(s,485)),Promise.resolve().then(s.bind(s,1629))},3187:(e,t,s)=>{"use strict";s.d(t,{BadgeProgressProvider:()=>c,_:()=>v});var n=s(5155),r=s(2115),o=s(4981),i=s(3588),a=s(9937),l=s(5110),d=s(1162);let u=(0,r.createContext)(void 0),c=e=>{var t,s;let{children:c}=e,{unlockBadge:v,isBadgeUnlocked:m}=(0,a.E)(),{user:b,userData:f,setUserData:g,storageMode:p}=(0,l.A)(),h=null!=(t=null==f?void 0:f.streak)?t:0,x=null!=(s=null==f?void 0:f.totalObservations)?s:0,k=(0,r.useCallback)((e,t)=>{var s,n,r,a;let l=(0,o.R)(),u=null!=f?f:d.nb,c=(null!=(s=u.totalObservations)?s:0)+1,h=u.lastObservationDate?new Date(u.lastObservationDate):null,x=null!=(n=u.streak)?n:0,k=null!=(r=u.revealHistory)?r:[];(!h||(0,i.m)(l,h)>0)&&(x=h&&1===(0,i.m)(l,h)?(null!=(a=u.streak)?a:0)+1:1);let w={celebrateImmediately:!1};3!==x||m("curious-kitten")||v("curious-kitten",w);let E=[{id:e,type:t},...k].slice(0,3);3===E.length&&E.every(e=>e.id===E[0].id)&&!m("quantum-echo")&&v("quantum-echo",w);let S={totalObservations:c,streak:x,lastObservationDate:l.toISOString(),revealHistory:E};g(e=>({...null!=e?e:d.nb,...S})),"cloud"===p&&b&&"guest"!==b&&(0,d.Ts)(b.uid,S)},[m,v,g,p,b,f]);return(0,n.jsx)(u.Provider,{value:{streak:h,totalObservations:x,recordObservation:k},children:c})},v=()=>{let e=(0,r.useContext)(u);if(void 0===e)throw Error("useBadgeProgress must be used within an BadgeProgressProvider");return e}},3673:()=>{},5395:(e,t,s)=>{"use strict";s.d(t,{BoxSkinProvider:()=>m,K:()=>b});var n=s(5155),r=s(2115),o=s(5110),i=s(1162),a=s(9970),l=s(1629),d=s(5894);let u=(0,r.createContext)(void 0),c=a.L.map(e=>e.id),v=e=>"string"==typeof e&&c.includes(e),m=e=>{let{children:t}=e,{user:s,userData:c,setUserData:m,storageMode:b}=(0,o.A)(),{points:f,spendPoints:g}=(0,l.P)(),{toast:p}=(0,d.dj)(),h=(0,r.useMemo)(()=>(e=>{let t=new Set;return a.L.filter(e=>0===e.cost).forEach(e=>t.add(e.id)),(null!=e?e:[]).forEach(e=>{v(e)&&t.add(e)}),Array.from(t)})(null==c?void 0:c.unlockedSkins),[c]),x=(0,r.useMemo)(()=>{let e=v(null==c?void 0:c.selectedSkin)?null==c?void 0:c.selectedSkin:"default";return h.includes(e)?e:"default"},[c,h]),k=(0,r.useCallback)(e=>{m(t=>({...null!=t?t:i.nb,selectedSkin:e})),"cloud"===b&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{selectedSkin:e})},[s,m,b]),w=(0,r.useCallback)(e=>{var t;let s=a.L.find(t=>t.id===e);return null!=(t=null==s?void 0:s.cost)?t:0},[]),E=(0,r.useCallback)(e=>h.includes(e),[h]),S=(0,r.useCallback)(e=>{if(E(e))return p({title:"Skin already unlocked!",description:"You already own the ".concat(e," box.")}),!0;let t=w(e);if(f<t)return p({variant:"destructive",title:"Not enough Fish Points!",description:"You need ".concat(t," Fish Points to unlock this skin.")}),!1;g(t);let n=Array.from(new Set([...h,e]));return m(e=>({...null!=e?e:i.nb,unlockedSkins:n})),"cloud"===b&&s&&"guest"!==s&&(0,i.Ts)(s.uid,{unlockedSkins:n}),p({title:"Skin Unlocked!",description:"You have unlocked the ".concat(e," box for ").concat(t," Fish Points.")}),!0},[h,E,w,f,g,m,b,s,p]);return(0,n.jsx)(u.Provider,{value:{selectedSkin:x,selectSkin:k,unlockedSkins:h,unlockSkin:S,getSkinCost:w,isSkinUnlocked:E},children:t})},b=()=>{let e=(0,r.useContext)(u);if(void 0===e)throw Error("useBoxSkin must be used within a BoxSkinProvider");return e}},5894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>c});var n=s(2115);let r=0,o=new Map,i=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},a=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),a.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function c(){let[e,t]=n.useState(l);return n.useEffect(()=>(a.push(t),()=>{let e=a.indexOf(t);e>-1&&a.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8516:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>p});var n=s(5155),r=s(5894),o=s(2115),i=s(5476),a=s(3101),l=s(6615),d=s(4269);let u=i.Kq,c=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});c.displayName=i.LM.displayName;let v=(0,a.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border-primary/20 bg-gradient-to-br from-background via-secondary/50 to-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m=o.forwardRef((e,t)=>{let{className:s,variant:r,...o}=e;return(0,n.jsx)(i.bL,{ref:t,className:(0,d.cn)(v({variant:r}),s),...o})});m.displayName=i.bL.displayName,o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=i.rc.displayName;let b=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});b.displayName=i.bm.displayName;let f=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",s),...r})});f.displayName=i.hE.displayName;let g=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",s),...r})});function p(){let{toasts:e}=(0,r.dj)();return(0,n.jsxs)(u,{children:[e.map(function(e){let{id:t,title:s,description:r,action:o,icon:i,...a}=e;return(0,n.jsxs)(m,{...a,children:[i&&(0,n.jsx)("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center text-primary",children:i}),(0,n.jsxs)("div",{className:"grid gap-1",children:[s&&(0,n.jsx)(f,{children:s}),r&&(0,n.jsx)(g,{children:r})]}),o,(0,n.jsx)(b,{})]},t)}),(0,n.jsx)(c,{})]})}g.displayName=i.VY.displayName}},e=>{e.O(0,[978,172,992,416,909,634,476,989,961,769,441,255,358],()=>e(e.s=2690)),_N_E=e.O()}]);