(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{485:(e,t,a)=>{"use strict";a.d(t,{FeedbackProvider:()=>o,j:()=>c});var r=a(5155),n=a(2115),l=a(5110),s=a(1162);let i=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,{user:a,userData:o,setUserData:c,storageMode:d}=(0,l.A)(),u=(0,n.useMemo)(()=>{var e,t,a,r,n,l,i,c,d,u,m,h,f;let p=null!=(n=s.nb.settings)?n:{soundEnabled:!0,vibrationEnabled:!0,volume:.5,reduceMotion:!1};return{soundEnabled:null==(i=null!=(l=null==o||null==(e=o.settings)?void 0:e.soundEnabled)?l:p.soundEnabled)||i,vibrationEnabled:null==(d=null!=(c=null==o||null==(t=o.settings)?void 0:t.vibrationEnabled)?c:p.vibrationEnabled)||d,volume:null!=(m=null!=(u=null==o||null==(a=o.settings)?void 0:a.volume)?u:p.volume)?m:.5,reduceMotion:null!=(f=null!=(h=null==o||null==(r=o.settings)?void 0:r.reduceMotion)?h:p.reduceMotion)&&f}},[o]),m=(0,n.useCallback)(e=>{c(t=>{let a=null!=t?t:{...s.nb};return{...a,settings:{...a.settings,soundEnabled:e}}}),"cloud"===d&&a&&"guest"!==a&&(0,s.Ts)(a.uid,{settings:{soundEnabled:e}}),localStorage.setItem("quantum-cat-sound-enabled",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[c,d,a]),h=(0,n.useCallback)(e=>{c(t=>{let a=null!=t?t:{...s.nb};return{...a,settings:{...a.settings,vibrationEnabled:e}}}),"cloud"===d&&a&&"guest"!==a&&(0,s.Ts)(a.uid,{settings:{vibrationEnabled:e}}),localStorage.setItem("quantum-cat-vibration-enabled",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[c,d,a]),f=(0,n.useCallback)(e=>{c(t=>{let a=null!=t?t:{...s.nb};return{...a,settings:{...a.settings,volume:e}}}),"cloud"===d&&a&&"guest"!==a&&(0,s.Ts)(a.uid,{settings:{volume:e}}),localStorage.setItem("quantum-cat-volume",e.toString()),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[c,d,a]),p=(0,n.useCallback)(e=>{c(t=>{let a=null!=t?t:{...s.nb};return{...a,settings:{...a.settings,reduceMotion:e}}}),"cloud"===d&&a&&"guest"!==a&&(0,s.Ts)(a.uid,{settings:{reduceMotion:e}}),localStorage.setItem("quantum-cat-reduce-motion",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("feedback-setting-changed"))},[c,d,a]);return(0,r.jsx)(i.Provider,{value:{soundEnabled:u.soundEnabled,setSoundEnabled:m,vibrationEnabled:u.vibrationEnabled,setVibrationEnabled:h,volume:u.volume,setVolume:f,reduceMotion:u.reduceMotion,setReduceMotion:p},children:t})},c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useFeedback must be used within a FeedbackProvider");return e}},3187:(e,t,a)=>{"use strict";a.d(t,{BadgeProgressProvider:()=>u,_:()=>m});var r=a(5155),n=a(2115),l=a(4981),s=a(3588),i=a(9937),o=a(5110),c=a(1162);let d=(0,n.createContext)(void 0),u=e=>{var t,a;let{children:u}=e,{unlockBadge:m,isBadgeUnlocked:h}=(0,i.E)(),{user:f,userData:p,setUserData:x,storageMode:g}=(0,o.A)(),v=null!=(t=null==p?void 0:p.streak)?t:0,b=null!=(a=null==p?void 0:p.totalObservations)?a:0,y=(0,n.useCallback)((e,t)=>{var a,r,n,i;let o=(0,l.R)(),d=null!=p?p:c.nb,u=(null!=(a=d.totalObservations)?a:0)+1,v=d.lastObservationDate?new Date(d.lastObservationDate):null,b=null!=(r=d.streak)?r:0,y=null!=(n=d.revealHistory)?n:[];(!v||(0,s.m)(o,v)>0)&&(b=v&&1===(0,s.m)(o,v)?(null!=(i=d.streak)?i:0)+1:1);let w={celebrateImmediately:!1};3!==b||h("curious-kitten")||m("curious-kitten",w);let j=[{id:e,type:t},...y].slice(0,3);3===j.length&&j.every(e=>e.id===j[0].id)&&!h("quantum-echo")&&m("quantum-echo",w);let N={totalObservations:u,streak:b,lastObservationDate:o.toISOString(),revealHistory:j};x(e=>({...null!=e?e:c.nb,...N})),"cloud"===g&&f&&"guest"!==f&&(0,c.Ts)(f.uid,N)},[h,m,x,g,f,p]);return(0,r.jsx)(d.Provider,{value:{streak:v,totalObservations:b,recordObservation:y},children:u})},m=()=>{let e=(0,n.useContext)(d);if(void 0===e)throw Error("useBadgeProgress must be used within an BadgeProgressProvider");return e}},4673:(e,t,a)=>{Promise.resolve().then(a.bind(a,4883))},4883:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eI});var r,n,l=a(5155),s=a(2115),i=a(5239),o=a(1270),c=a(8727),d=a(7824);function u(e){let{state:t}=e,{outcome:a,catId:r}=t;if("initial"===a||!r)return null;let n=c.s[r];return n?(0,l.jsxs)("div",{className:"animate-bounce-in relative",children:["cosmic"===r&&(0,l.jsx)(d.j,{}),(0,l.jsx)(n,{className:"w-52 h-52 md:w-56 md:h-56"})]}):null}var m=a(1561),h=a(5395),f=a(485),p=a(4269);let x={carbon:m.Sk,cardboard:m.vy,"black-wooden":m.IA,"special-xk6":m.z6,stone:m.si,tardis:m.c3,"circuit-board":m.Ut,crystal:m.nI,galaxy:m.hV,plush:m.ps,steampunk:m.Z};function g(e){var t;let{onClick:a,isLoading:r,isRevealing:n=!1,catState:s,isAmbientShaking:i,isLocked:c=!1,lockMessage:d}=e,{selectedSkin:g}=(0,h.K)(),{reduceMotion:v}=(0,f.j)(),b=null!=(t=x[g])?t:m.Fn,y="initial"!==s.outcome&&!r,w="gravity"===s.catId;return(0,l.jsxs)("button",{type:"button",onClick:a,disabled:r||y||c,className:(0,p.cn)("group relative rounded-2xl transition-transform duration-300 ease-out focus:outline-none focus-visible:ring-4 focus-visible:ring-[#A240FF] focus-visible:ring-offset-4 focus-visible:ring-offset-background",!y&&!r&&!c&&"hover:scale-105",r&&!v&&"animate-shake",i&&!v&&"animate-subtle-shake",c&&"cursor-not-allowed opacity-70",(r||y)&&"cursor-default"),"aria-label":c?"Quantum Box locked until tomorrow":"Open the Quantum Box","aria-disabled":r||y||c,children:[(0,l.jsx)(b,{className:"h-52 w-52 md:h-56 md:w-56",isOpen:y}),"initial"!==s.outcome&&s.catId&&!w&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-end justify-center",children:(0,l.jsx)("div",{className:"h-full w-full translate-y-[25%] scale-[0.6]",children:(0,l.jsx)(u,{state:s})})}),y&&w&&(0,l.jsx)("div",{className:(0,p.cn)("absolute inset-x-0 top-0 flex justify-center transition-transform duration-300",y&&"-translate-y-4"),children:(0,l.jsx)("div",{className:"h-full w-full -translate-y-[15%] scale-[0.6]",children:(0,l.jsx)(u,{state:s})})}),c&&!y&&!r&&!n&&d&&(0,l.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-2xl bg-[#002D41]/85 px-4 text-center shadow-inner backdrop-blur-md",children:[(0,l.jsx)(o.A,{className:"mb-1.5 h-6 w-6 text-[#A240FF]"}),(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#A9DB4A]",children:"Quantum flux stabilizing"}),(0,l.jsx)("p",{className:"mt-1 text-[11px] text-white/80",children:d})]})]})}let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,[a,r]=(0,s.useState)("");return(0,s.useEffect)(()=>{let a=0,n=setInterval(()=>{a<e.length?(r(e.substring(0,a+1)),a++):clearInterval(n)},t);return()=>{clearInterval(n)}},[e,t]),a};var b=a(7783);let y=()=>{let[e,t]=(0,s.useState)(1),a=["text-accent/40","text-accent/60","text-accent/80","text-accent"];return(0,s.useEffect)(()=>{let e=setInterval(()=>{t(e=>e%4+1)},400);return()=>clearInterval(e)},[]),(0,l.jsx)("div",{className:"flex items-center justify-center space-x-2",children:Array.from({length:4}).map((t,r)=>(0,l.jsx)(b.A,{className:"h-4 w-4 ".concat(a[r]," transition-opacity duration-300"),style:{opacity:+(r<e)}},r))})};var w=a(8314);let j={alive:"message-alive",dead:"message-dead",paradox:"message-default",initial:"message-default"};function N(e){let{message:t,catState:a}=e,{reduceMotion:r}=(0,f.j)(),n=v(t,50);if((0,s.useEffect)(()=>{var e;if(!t)return;let r=null!=(e=j[a.outcome])?e:j.paradox;(0,w.gt)(r)},[t,a.outcome]),"initial"===a.outcome)return(0,l.jsx)("div",{className:"h-8","aria-hidden":!0});if(!t)return(0,l.jsx)("div",{className:"flex h-8 items-center justify-center","aria-live":"polite","aria-busy":!0,children:(0,l.jsx)(y,{})});let i=n.split(RegExp("(?<=[.!?])\\s+")).map(e=>e.trim()).filter(Boolean);return(0,l.jsx)("div",{className:(0,p.cn)("w-full max-w-2xl",!r&&"animate-bounce-in"),children:(0,l.jsx)("div",{className:"rounded-xl bg-muted/50 px-4 py-5 text-center shadow-sm",children:(0,l.jsx)("div",{className:"font-fortune text-lg font-semibold leading-relaxed text-primary sm:text-xl","aria-live":"polite",children:i.map((e,t)=>(0,l.jsx)("p",{className:"mb-1 last:mb-0",children:e},"".concat(e,"-").concat(t)))})})})}var k=a(272),C=a(6654),S=a(4729),E=a(9007),F=a(2614),A=a(2251);let T=S.bL;S.YJ;let I=S.WT,D=s.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,l.jsxs)(S.l9,{ref:t,className:(0,p.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,l.jsx)(S.In,{asChild:!0,children:(0,l.jsx)(E.A,{className:"h-4 w-4 opacity-50"})})]})});D.displayName=S.l9.displayName;let M=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(S.PP,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(F.A,{className:"h-4 w-4"})})});M.displayName=S.PP.displayName;let P=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(S.wn,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(E.A,{className:"h-4 w-4"})})});P.displayName=S.wn.displayName;let R=s.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...s}=e;return(0,l.jsx)(S.ZL,{children:(0,l.jsxs)(S.UC,{ref:t,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...s,children:[(0,l.jsx)(M,{}),(0,l.jsx)(S.LM,{className:(0,p.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,l.jsx)(P,{})]})})});R.displayName=S.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(S.JU,{ref:t,className:(0,p.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=S.JU.displayName;let q=s.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,l.jsxs)(S.q7,{ref:t,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(S.VF,{children:(0,l.jsx)(A.A,{className:"h-4 w-4"})})}),(0,l.jsx)(S.p4,{children:r})]})});q.displayName=S.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(S.wv,{ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=S.wv.displayName;var Q=a(1647),B=a(3998),O=a(6259),U=a(1834);function L(e){let{allCats:t,onCatSelect:a,catState:r,quantumMessage:n}=e;return(0,l.jsxs)("div",{className:(0,p.cn)("mb-2 w-full space-y-4 animate-fade-in-up"),children:[(0,l.jsxs)(Q.E,{className:"gap-1 text-xs uppercase tracking-wide",children:[(0,l.jsx)(k.A,{className:"h-3.5 w-3.5"}),"Quantum Dev Mode"]}),(0,l.jsxs)(T,{onValueChange:a,children:[(0,l.jsx)(D,{children:(0,l.jsx)(I,{placeholder:"Select a Quantum Cat to view"})}),(0,l.jsx)(R,{children:t.map(e=>(0,l.jsx)(q,{value:e.id,children:e.name},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Quantum Sound Lab"}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-2",children:w.G2.map(e=>(0,l.jsx)(B.$,{type:"button",variant:"outline",size:"sm",onClick:()=>(0,w.gt)(e),"aria-label":"Play ".concat(e," sound"),children:e},e))})]}),"initial"!==r.outcome&&n&&(0,l.jsxs)(U.lG,{children:[(0,l.jsx)(U.zM,{asChild:!0,children:(0,l.jsxs)(B.$,{size:"sm",variant:"outline",className:"w-full gap-1.5",children:[(0,l.jsx)(C.A,{className:"h-4 w-4"}),"Preview Quantum Message Share"]})}),(0,l.jsxs)(U.Cf,{children:[(0,l.jsx)(U.c7,{children:(0,l.jsx)(U.L3,{children:"Quantum Message Share Preview"})}),(0,l.jsx)("div",{style:{width:"320px",height:"520px",margin:"auto"},children:"Quantum Message preview"})]})]}),(0,l.jsx)(O.w,{})]})}var _=a(6711),z=a(8771),Y=a(6140);function W(e){let{onToggleDiaryEntry:t,onShareQuantumMessage:a,onRequestAnotherQuantumBox:r,isDiarySaved:n,hasSharedQuantumMessage:s,reduceMotion:i,isShareDisabled:o=!1,isResetDisabled:c=!1}=e,d=i?"transition-colors duration-200 ease-in-out":"transition-transform duration-200 ease-in-out hover:scale-105";return(0,l.jsxs)("div",{className:(0,p.cn)("mt-4 flex w-full items-center justify-center gap-4",!i&&"animate-bounce-in"),children:[(0,l.jsx)(B.$,{type:"button",size:"icon",variant:"outline","aria-pressed":n,"aria-label":n?"Remove from Cat Diary":"Save to Cat Diary",className:(0,p.cn)(d,"border-transparent text-muted-foreground",n?"bg-[#FF809F]/20 text-[#FF809F] hover:bg-[#FF809F]/30":"hover:text-[#FF809F]"),onClick:t,children:(0,l.jsx)(_.A,{className:(0,p.cn)("h-4 w-4 transition-colors",n?"fill-current text-[#FF809F]":"text-muted-foreground")})}),(0,l.jsxs)(B.$,{type:"button",size:"sm",onClick:a,className:(0,p.cn)("flex items-center bg-gradient-to-r from-[#3696C9] via-[#A240FF] to-[#FF809F] text-white shadow-lg",d,s&&"from-[#A9DB4A] via-[#A9DB4A] to-[#A9DB4A] text-[#002D41] hover:brightness-110"),"aria-pressed":s,"aria-label":s?"Quantum Message shared":"Share",disabled:o,children:[(0,l.jsx)(z.A,{className:"mr-2 h-3.5 w-3.5"}),s?"Shared!":"Share"]}),(0,l.jsx)(B.$,{type:"button",size:"icon",variant:"outline",onClick:r,className:(0,p.cn)(d,"text-muted-foreground hover:text-[#3696C9]",c&&"pointer-events-none opacity-50"),disabled:c,"aria-label":"Reveal another Quantum Box",children:(0,l.jsx)(Y.A,{className:(0,p.cn)("h-4 w-4 transition-colors",c?"text-muted-foreground/50":"text-[#3696C9]")})})]})}var $=a(2488),J=a(7071),V=a(5322),G=a(334),K=a(8118),Z=a(6948),H=a(6895);let X=null!=(r=H.k)?r:[],ee={default:m.Fn,carbon:m.Sk,cardboard:m.vy,"black-wooden":m.IA,"special-xk6":m.z6,stone:m.si,tardis:m.c3,"circuit-board":$.U,crystal:J.n,galaxy:V.h,plush:G.p,steampunk:K.Z};function et(e){var t,a;let{catState:r,message:n,boxSkin:s}=e,o=X.find(e=>e.id===r.catId),c=(e=>{if(!e)return{part1:"The",part2:"Quantum",part3:"Cat"};if("Void"===e)return{part1:"The",part2:"Void",part3:"Cat"};if(e.endsWith(" Cat")){let t=e.replace(/ Cat$/,""),a=t.split(" ");return a.length>1?{part1:"The",part2:a.join(" "),part3:"Cat"}:{part1:"The",part2:t,part3:"Cat"}}return{part1:"The",part2:e,part3:"Cat"}})(null!=(t=null==o?void 0:o.name)?t:null),d=null!=(a=ee[s])?a:m.Fn,h=n.split(/\r?\n/).flatMap(e=>e.split(RegExp("(?<=[.!?])\\s+"))).map(e=>e.trim()).filter(Boolean);return(0,l.jsx)(Z.Zp,{className:"relative flex h-full w-full flex-col items-center rounded-[32px] border border-white/20 bg-[linear-gradient(135deg,#5eead4_0%,#67e8f9_32%,#f0abfc_66%,#c4b5fd_100%)] px-6 pb-8 pt-6 text-center font-body text-white shadow-[0_25px_70px_-35px_rgba(79,70,229,0.45)]",children:(0,l.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-between gap-4",children:[(0,l.jsxs)("header",{className:"flex w-full flex-col items-center gap-3",children:[(0,l.jsx)(i.default,{src:"/favicon.svg",alt:"The Quantum Cat logo",width:48,height:48,className:"h-12 w-12"}),(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 font-headline text-3xl font-bold tracking-tight text-black",children:[(0,l.jsx)("span",{children:c.part1}),(0,l.jsx)("span",{children:c.part2}),(0,l.jsx)("span",{children:c.part3})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-1 flex-col items-center justify-center gap-5",children:[(0,l.jsxs)("div",{className:"relative h-32 w-32 -translate-y-2 transform",children:[(0,l.jsx)(d,{className:"h-full w-full",isOpen:!0}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("div",{className:"h-full w-full scale-[0.7]",children:(0,l.jsx)(u,{state:r})})})]}),(0,l.jsx)("div",{className:"w-full max-w-[260px]",children:(0,l.jsx)("div",{className:"rounded-xl bg-white/85 px-4 py-3 text-center shadow-sm backdrop-blur",children:(0,l.jsx)("div",{className:"font-fortune text-base font-semibold leading-relaxed text-primary",children:h.length>0?h.map((e,t)=>(0,l.jsx)("p",{className:"mb-1 last:mb-0",children:e},"".concat(e,"-").concat(t))):(0,l.jsx)("p",{children:"A curious fortune emerges."})})})})]}),(0,l.jsx)("footer",{className:"w-full pt-4 text-xs font-semibold uppercase tracking-[0.3em] text-white/80",children:"thequantumcat.app • #QuantumCat"})]})})}var ea=a(1165);function er(){let{reduceMotion:e}=(0,f.j)();return(0,l.jsxs)("div",{className:(0,p.cn)("absolute top-0 flex flex-col items-center space-y-2 text-center",!e&&"animate-bounce"),children:[(0,l.jsx)("span",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-primary",children:"Tap the Box"}),(0,l.jsx)(ea.A,{className:"h-6 w-6 text-primary","aria-hidden":!0})]})}function en(e){let{name:t,onTitleClick:a,reduceMotion:r}=e,n=function(e){if(!e)return{part1:"The",part2:"Quantum",part3:"Cat"};if("Void"===e)return{part1:"The",part2:"Void",part3:"Cat"};if(e.endsWith(" Cat")){let t=e.replace(" Cat",""),a=t.split(" ");return a.length>1?{part1:"The",part2:a.join(" "),part3:"Cat"}:{part1:"The",part2:t,part3:"Cat"}}return{part1:"The",part2:e,part3:"Cat"}}(t);return(0,l.jsx)("div",{onClick:a,className:(0,p.cn)("relative h-12 w-full select-none cursor-pointer flex items-center justify-center font-headline text-4xl font-bold tracking-tight"),children:null===t?(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)("span",{children:n.part1}),(0,l.jsx)("span",{children:n.part2}),(0,l.jsx)("span",{children:n.part3})]}):(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)("span",{className:(0,p.cn)("inline-block",!r&&"animate-cartoon-bounce"),children:n.part1}),(0,l.jsx)("span",{className:(0,p.cn)("inline-block",!r&&"animate-spin-reveal"),children:n.part2}),(0,l.jsx)("span",{className:(0,p.cn)("inline-block",!r&&"animate-cartoon-bounce [animation-delay:0.1s]"),children:n.part3})]})})}var el=a(9513),es=a(3187),ei=a(3961),eo=a(1629),ec=a(926);let ed=(0,ec.createServerReference)("40a75442b27aaf4253f5fcaf879727a896dc70b4c9",ec.callServer,void 0,ec.findSourceMapURL,"generateCatMessage"),eu=JSON.parse('{"messages":["Open the box: today holds a pleasant maybe.","You are both brave and cozy. Pick one now.","Curiosity purrs louder than doubt.","Try the improbable. The cat approves.","Your superposition: scared and ready.","Bat the smallest string of progress.","Nap on worry. Wake on wonder.","Treat choices like cat steps: light, many.","Schrodinger called: choose joy and observe it.","Nine lives? Use one for fun today.","Today your courage prowls like a curious cat, don’t hide it under the sofa of doubt.","Nine lives mean nine tries: start your first attempt today.","Like a cat chasing a laser, joy is not in the catch but in the chase.","Curiosity didn’t kill the cat, it just taught her new tricks.","You’re both the nap and the thunderstorm; balance them wisely.","Don’t fear the closed box, the mystery is half the fun.","Paradox: You’re both late and exactly on time. Run with it.","Like whiskers sensing the unseen, your intuition is sharper than you admit.","The world wants you bold today, no shrinking into cardboard boxes.","Chaos is just a cosmic yarn ball waiting to be batted.","Stretch like a cat: occupy more space than your doubts allow."]}');var em=a(5379);let eh=H.k,ef=(()=>{let e={alive:{title:"Alive",cats:[]},dead:{title:"Dead",cats:[]},paradox:{title:"Paradox",cats:[]}};eh.forEach(t=>{let a=(e=>{if(!e)return null;let t=e.toLowerCase();return"alive"===t||"dead"===t||"paradox"===t?t:null})(t.type);if(!a)return;let r=Number.isFinite(t.points)&&t.points>0?t.points:1;e[a].cats.push({id:t.id,rarity:r})});let t=eh[0];return Object.keys(e).forEach(a=>{0===e[a].cats.length&&t&&e[a].cats.push({id:t.id,rarity:1})}),e})(),ep=H.outcomes,ex="quantum-cat-last-open",eg=Array.isArray(eu)?eu:null!=(n=eu.messages)?n:[],ev=Array.isArray(eg)?eg:[],eb="Embrace the mystery beyond the box.",ey=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate()),ew=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);var ej=a(5894);let eN=H.k;var ek=a(3311),eC=a(9937),eS=a(5110),eE=a(1162),eF=a(9225);let eA=[{icon:a(2158).A,accentClass:"bg-[#A240FF]/10 text-[#A240FF]",title:"Open the Quantum Box",titleClass:"text-[#A240FF]",body:"Tap the Quantum Box to collapse possibilities and reveal a cat in one of three cat states: alive, dead, or paradox."},{icon:b.A,accentClass:"bg-[#FF809F]/10 text-[#FF809F]",title:"Collect Fish Points",titleClass:"text-[#FF809F]",body:"Earn Fish Points, unlock badges, and grow your streak as you uncover new cats from the quantum realm."},{icon:_.A,accentClass:"bg-[#3696C9]/10 text-[#3696C9]",title:"Curate Your Cat Diary",titleClass:"text-[#3696C9]",body:"Save your favourite Quantum Messages to the Cat Diary and revisit past revelations in your gallery."},{icon:z.A,accentClass:"bg-[#A9DB4A]/10 text-[#A9DB4A]",title:"Share the Wonder",titleClass:"text-[#A9DB4A]",body:"Unlock Box Skins, share your discoveries, and return daily for fresh twists in quantum reality."}];function eT(e){let{open:t,onClose:a}=e,[r,n]=(0,s.useState)(0),i=eA.length,o=eA[r],c=r===i-1,d=()=>{c?(n(0),a()):n(e=>Math.min(e+1,i-1))},u=o.icon;return(0,l.jsx)(U.lG,{open:t,onOpenChange:e=>{e||(n(0),a())},children:(0,l.jsx)(U.Cf,{className:"max-w-lg border-0 bg-transparent p-0",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("div",{role:"button",tabIndex:0,onClick:d,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),d())},className:"flex w-full max-w-md flex-col items-center gap-6 rounded-3xl bg-white p-10 text-center shadow-xl focus:outline-none focus:ring-2 focus:ring-[#A240FF]",children:[(0,l.jsx)("div",{className:(0,p.cn)("flex h-20 w-20 items-center justify-center rounded-2xl",o.accentClass),children:(0,l.jsx)(u,{className:"h-10 w-10"})}),(0,l.jsx)("h3",{className:(0,p.cn)("font-headline text-3xl font-semibold",o.titleClass),children:o.title}),(0,l.jsx)("p",{className:"font-body text-lg leading-relaxed text-muted-foreground",children:o.body})]})})})})}function eI(e){var t;let{onInteraction:a,setRevealedCatId:r}=e,[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),[k,C]=(0,s.useState)(!0),[S,E]=(0,s.useState)(""),[F,A]=(0,s.useState)(!1),[T,I]=(0,s.useState)(!1),[D,M]=(0,s.useState)(!1),{toast:P}=(0,ej.dj)(),{toggleDiaryEntry:R,isMessageSaved:q,recordReveal:Q}=(0,eF.j)(),{lastUnlockedBadgeId:O,triggerCelebration:_}=(0,eC.E)(),{reduceMotion:z}=(0,f.j)(),{selectedSkin:Y}=(0,h.K)(),{storageMode:$,localProgressMessageSeen:J,markLocalMessageSeen:V}=(0,eS.A)(),{catState:G,message:K,isLoading:Z,isRevealing:H,revealedCatName:X,handleBoxClick:ee,handleReset:ea,setCatState:ec,setMessage:eu,setRevealedCatName:eg,isDailyLocked:eA,nextAvailableAt:eI,refreshDailyLock:eD,overrideDailyLock:eM}=function(e){let{onInteraction:t,setRevealedCatId:a,onCatReveal:r}=e,[n,l]=(0,s.useState)({outcome:"initial"}),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),y=(0,s.useRef)(void 0),{recordObservation:j}=(0,es._)(),{unlockCat:N}=(0,ei.Y)(),{addPoints:k}=(0,eo.P)(),{selectedSkin:C}=(0,h.K)(),{setTheme:S}=(0,em.D)();(0,s.useEffect)(()=>{if(a&&a(n.catId||null),"breu"===n.catId)S("dark");else{let e=localStorage.getItem("theme");"dark"!==e&&S(e||"light")}},[n.catId,a,S]);let E=(0,s.useCallback)(()=>{try{let e=new Date;localStorage.setItem(ex,e.toISOString()),g(!0),b(ew(e).getTime())}catch(e){console.warn("Unable to persist daily lock state",e)}},[]),F=(0,s.useCallback)(()=>{let e=null;try{e=localStorage.getItem(ex)}catch(e){console.warn("Unable to read daily lock state",e)}let t=new Date,a=ey(t),r=!1;if(e){let t=new Date(e);Number.isNaN(t.getTime())||(r=ey(t).getTime()===a.getTime())}g(r),b(r?ew(t).getTime():null)},[]);(0,s.useEffect)(()=>{let e;return e=window.setTimeout(()=>{F()},0),()=>{void 0!==e&&window.clearTimeout(e)}},[F]),(0,s.useEffect)(()=>{if(void 0!==y.current&&(window.clearTimeout(y.current),y.current=void 0),!x||!v)return;let e=v-Date.now();return e<=0?void window.setTimeout(()=>{F()},0):(y.current=window.setTimeout(()=>{F()},e+1e3),()=>{void 0!==y.current&&(window.clearTimeout(y.current),y.current=void 0)})},[x,v,F]),(0,s.useEffect)(()=>()=>{void 0!==y.current&&window.clearTimeout(y.current)},[]);let A=async e=>{var a,s,i;let h,f,g;if(c||"initial"!==n.outcome||u)return;if(x&&!(null==e?void 0:e.ignoreLock))return void(0,w.gt)("haptic-3");null==t||t(),(0,w.gt)("click-1"),(null==e?void 0:e.ignoreLock)||E(),m(!0),o(""),p(null);let v=Math.random(),b=(e=>{let t=null==ep?void 0:ep[e];return t&&Array.isArray(t.cats)&&t.cats.length>0?t:ef[e]})(h=v<.47?"alive":v<.94?"dead":"paradox");if(!(null==b||null==(a=b.cats)?void 0:a.length)){console.error('No cats configured for outcome "'.concat(h,'". Falling back to default.')),m(!1),d(!1);return}let y=Math.random()*b.cats.reduce((e,t)=>e+t.rarity,0);for(let e of b.cats)if((y-=e.rarity)<=0){f=e.id;break}f||(f=b.cats[b.cats.length-1].id),j(f,h);let S=eh.find(e=>e.id===f);S&&N(S.id,{celebrateImmediately:!1});let F={catId:f,catName:null!=(s=null==S?void 0:S.name)?s:"Quantum Cat",catType:null!=(i=null==S?void 0:S.type)?i:h.charAt(0).toUpperCase()+h.slice(1),catDescription:null==S?void 0:S.description},A=f,T=!1,I=e=>{let t="string"==typeof e?e.trim():"",a=t.length?t:(()=>{if(!ev.length)return eb;let e=ev[Math.floor(Math.random()*ev.length)];if("string"==typeof e){let t=e.trim();return t.length?t:eb}if(e&&"string"==typeof e.message){let t=e.message.trim();return t.length?t:eb}return eb})();o(a),T||(r(A,a),T=!0)},D=()=>{void 0!==g&&(window.clearTimeout(g),g=void 0)};g=window.setTimeout(()=>{g=void 0,T||I()},6500),ed(F).then(e=>{if(D(),!e||"string"!=typeof e.message)return void I();I(e.message)}).catch(e=>{D(),console.error("AI message generation failed:",e),I()}),setTimeout(()=>{switch(m(!1),d(!0),C){case"carbon":(0,w.gt)("reveal-carbon");break;case"cardboard":(0,w.gt)("reveal-cardboard");break;default:(0,w.gt)("reveal-default")}setTimeout(()=>{d(!1),l({outcome:h,catId:void 0}),setTimeout(()=>{l({outcome:h,catId:f})},300),setTimeout(()=>{S&&(p(S.name),k(S.points))},800)},1400)},1500)},T=(0,s.useCallback)(()=>{a&&a(null),document.documentElement.classList.contains("dark")&&S(localStorage.getItem("theme")||"light"),l({outcome:"initial"}),o(""),p(null)},[a,S]);return{catState:n,message:i,isLoading:c,isRevealing:u,revealedCatName:f,handleBoxClick:A,handleReset:(0,s.useCallback)(e=>{if(null==t||t(),x&&!(null==e?void 0:e.ignoreLock))return void(0,w.gt)("haptic-3");(0,w.gt)("click-2"),T()},[x,t,T]),setCatState:l,setMessage:o,setRevealedCatName:p,isDailyLocked:x,nextAvailableAt:v,refreshDailyLock:F,overrideDailyLock:(0,s.useCallback)(()=>{null==t||t();try{window.localStorage.removeItem(ex)}catch(e){console.warn("Unable to clear daily lock state",e)}void 0!==y.current&&(window.clearTimeout(y.current),y.current=void 0),g(!1),b(null),(0,w.gt)("click-2"),T()},[t,T])}}({onInteraction:a,setRevealedCatId:e=>{j(e),null==r||r(e)},onCatReveal:(e,t)=>{j(e),Q(e)}}),{isDevMode:eP,handleTitleClick:eR,handleDevCatSelect:eq,allCats:eQ}=function(e){let{handleReset:t,setCatState:a,setMessage:r,setRevealedCatName:n,setRevealedCatId:l}=e,[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0),{toast:u}=(0,ej.dj)();return{isDevMode:i,handleTitleClick:()=>{let e=c+1;if(d(e),e>=7){let e=!i;o(e),d(0),u({title:"Dev mode ".concat(e?"enabled":"disabled"),description:"Click the title 7 times to toggle."})}},handleDevCatSelect:e=>{i&&(t(),setTimeout(()=>{let t=eN.find(t=>t.id===e);if(!t)return;let s="initial";"Alive"===t.type?s="alive":"Dead"===t.type?s="dead":"Paradox"===t.type&&(s="paradox"),l&&l(e),a({outcome:s,catId:void 0}),setTimeout(()=>{a({outcome:s,catId:e}),n(t.name),r("(Dev) Displaying ".concat(t.name,"."))},300)},100))},allCats:eN}}({handleReset:ea,setCatState:ec,setMessage:eu,setRevealedCatName:eg,setRevealedCatId:r}),{shareCardRef:eB,createShareAsset:eO,rewardShare:eU}=function(e){let t=(0,s.useRef)(null),{addPoints:a}=(0,eo.P)(),{isBadgeUnlocked:r,unlockBadge:n}=(0,eC.E)(),{user:l,setUserData:i,storageMode:o,userData:c}=(0,eS.A)(),d=(0,s.useRef)(0);(0,s.useEffect)(()=>{var e;d.current=null!=(e=null==c?void 0:c.shareCount)?e:0},[c]);let u=(0,s.useCallback)(async()=>{if(!t.current||!e)throw Error("Share content is not ready yet.");let a=await ek.$E(t.current,{cacheBust:!0,pixelRatio:2,fontEmbedCSS:"@import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');"}),r=new File([await (await fetch(a)).blob()],"quantum-cat.png",{type:"image/png"});return{dataUrl:a,file:r}},[e]);return{shareCardRef:t,createShareAsset:u,rewardShare:(0,s.useCallback)(()=>{let e=0;i(t=>{var a;let r=null!=t?t:eE.nb;return e=(null!=(a=r.shareCount)?a:0)+1,{...r,shareCount:e}}),"cloud"===o&&l&&"guest"!==l?(0,eE.Ts)(l.uid,{shareCount:e}):d.current=e,a(10),1!==e||r("storyteller")||n("storyteller"),e>=5&&!r("viral-cat")&&n("viral-cat")},[a,r,n,i,o,l])}}(K),eL=null==G?void 0:G.catId,e_=null!=(t=null==G?void 0:G.catId)?t:y,ez=!!(e_&&K&&q(e_,K));(0,s.useEffect)(()=>{try{"seen"===sessionStorage.getItem("quantum-cat-splash")&&C(!1)}catch(e){console.warn("Unable to access sessionStorage for splash screen state",e)}},[]),(0,s.useEffect)(()=>{try{localStorage.getItem("quantum-cat-onboarding-v2")||o(!0)}catch(e){console.error("Could not access localStorage for onboarding",e)}},[]),(0,s.useEffect)(()=>{let e;return"initial"!==G.outcome||Z||H||z||(e=setInterval(()=>{.2>Math.random()&&(d(!0),setTimeout(()=>d(!1),500))},3e3)),()=>clearInterval(e)},[G.outcome,Z,H,z]),(0,s.useEffect)(()=>{if(!K||!O||!eL||H||Z)return;let e=setTimeout(()=>{_()},Math.min(8e3,Math.max(2500,400*K.trim().split(/\s+/).filter(Boolean).length)));return()=>clearTimeout(e)},[K,O,_,eL,H,Z]),(0,s.useEffect)(()=>{"local"===$&&!J&&(null==G?void 0:G.outcome)!=="initial"&&(null==G?void 0:G.catId)&&(P({title:"Progress saved locally",description:"Your cats and fortunes are saved on this device."}),V())},[$,J,null==G?void 0:G.outcome,null==G?void 0:G.catId,P,V]),(0,s.useEffect)(()=>{!T||Z||H||"initial"===G.outcome&&(I(!1),ee({ignoreLock:!0}))},[T,Z,H,G.outcome,ee]),(0,s.useEffect)(()=>{eA||E("")},[eA]),(0,s.useEffect)(()=>{try{"true"!==localStorage.getItem("quantum-cat-tutorial-v1")&&M(!0)}catch(e){console.warn("Unable to access tutorial overlay state",e)}},[]);let eY=(0,s.useCallback)(()=>{M(!1);try{localStorage.setItem("quantum-cat-tutorial-v1","true")}catch(e){console.warn("Unable to persist tutorial overlay state",e)}},[]);(0,s.useEffect)(()=>{"initial"!==G.outcome&&eY()},[G.outcome,eY]);let eW=(0,s.useMemo)(()=>X?"I opened the box and my cat is a ".concat(X,"! What state will your cat be in?"):"I opened the quantum cat box! What state will your cat be in?",[X]),e$=(0,s.useMemo)(()=>"undefined"!=typeof navigator&&"function"==typeof navigator.share,[]),eJ=(0,s.useMemo)(()=>"undefined"!=typeof document&&void 0!==document.createElement("a").download,[]),eV=(0,s.useCallback)(()=>{eA?eM():ea({ignoreLock:!0}),A(!1),E(""),I(!1)},[eA,eM,ea]),eG=async()=>{if(!u){(0,w.gt)("click-2"),m(!0),P({title:"Generating your share card...",description:"Please wait a moment."});try{let e=await eO();b(e),x(!0),P({title:"Share card ready!",description:"Choose how you want to share it."})}catch(e){e instanceof Error&&e.message.includes("not ready")?P({title:"Cannot share yet",description:"The reveal is not complete.",variant:"destructive"}):(console.error("Failed to prepare share card:",e),P({title:"Sharing Failed",description:"Could not generate the image. Please try again.",variant:"destructive"}))}finally{m(!1)}}},eK=async()=>{if(v){if(!e$)return void P({title:"Sharing not supported",description:"Your device does not support direct sharing.",variant:"destructive"});try{if("function"==typeof navigator.canShare&&!navigator.canShare({files:[v.file]}))throw Error("Unsupported share type");await navigator.share({title:"The Quantum Cat",text:eW,files:[v.file],url:"https://thequantumcat.app"}),eU(),A(!0),P({description:"10 Fish Points awarded."}),x(!1),b(null)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return void P({title:"Share canceled",description:"No worries—try again whenever you like."});console.error("Native share failed:",e),P({title:"Share unavailable",description:"Try saving the image and sharing it manually.",variant:"destructive"})}}};return(0,l.jsx)(l.Fragment,{children:k?(0,l.jsx)(el.S,{onComplete:()=>{C(!1);try{sessionStorage.setItem("quantum-cat-splash","seen")}catch(e){console.warn("Unable to persist splash screen state",e)}}}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eT,{open:n,onClose:()=>{o(!1);try{localStorage.setItem("quantum-cat-onboarding-v2","true")}catch(e){console.error("Could not persist onboarding state",e)}}}),(0,l.jsx)("div",{className:"absolute left-[-1000px] top-[-1000px]",children:(0,l.jsx)("div",{ref:eB,style:{width:"320px",height:"520px"},children:(0,l.jsx)(et,{catState:G,message:K,boxSkin:Y})})}),(0,l.jsxs)("div",{className:"mx-auto flex w-full max-w-full flex-col items-center text-center",children:[(0,l.jsx)(en,{name:X,onTitleClick:eR,reduceMotion:z}),eP&&(0,l.jsx)(L,{allCats:eQ,onCatSelect:eq,catState:G,quantumMessage:K}),(0,l.jsxs)("div",{className:"relative mt-6 flex h-64 w-full items-center justify-center",children:[D&&!n&&!eA&&"initial"===G.outcome&&(0,l.jsx)(er,{}),(0,l.jsx)(g,{onClick:()=>{if(!n){if(eA){eM(),I(!0),S&&E(""),D&&eY();return}S&&E(""),D&&eY(),ee({ignoreLock:!0})}},isLoading:Z,isRevealing:H,catState:G,isAmbientShaking:c,isLocked:!1})]}),(0,l.jsx)("div",{className:"mt-6 flex w-full flex-col items-center gap-6",children:"initial"!==G.outcome&&(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-6",children:[(0,l.jsx)(N,{message:K,catState:G}),S&&(0,l.jsx)("div",{className:"mt-4 w-full max-w-2xl",children:(0,l.jsx)("div",{className:"rounded-xl border border-emerald-400 bg-emerald-500/10 px-4 py-4",children:(0,l.jsx)("div",{className:"font-fortune text-center text-emerald-400 text-xl font-semibold leading-tight md:text-2xl",children:S.split("\n").map((e,t)=>(0,l.jsx)("div",{children:e},t))})})}),K&&(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(W,{onToggleDiaryEntry:()=>{e_&&K&&((0,w.gt)("haptic-1"),P({description:R(e_,K)?"Message saved to this cat's diary in your gallery.":"Message removed from this cat's diary."}))},onShareQuantumMessage:eG,onRequestAnotherQuantumBox:eV,isDiarySaved:ez,hasSharedQuantumMessage:F,reduceMotion:z,isShareDisabled:u,isResetDisabled:!1})})]})})]}),(0,l.jsx)(U.lG,{open:p,onOpenChange:e=>{e||(x(!1),b(null))},children:(0,l.jsxs)(U.Cf,{className:"sm:max-w-md",children:[(0,l.jsxs)(U.c7,{children:[(0,l.jsx)(U.L3,{children:"Share your discovery"}),(0,l.jsx)(U.rr,{children:"Send the card to Instagram, WhatsApp, or anywhere else."})]}),v?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"overflow-hidden rounded-lg border bg-background/50",children:(0,l.jsx)(i.default,{src:v.dataUrl,alt:"Quantum Cat share card",width:320,height:520,unoptimized:!0,className:"w-full h-auto"})}),e$&&(0,l.jsx)(B.$,{onClick:eK,children:"Share via device…"}),(0,l.jsx)(B.$,{variant:"outline",onClick:()=>{if(v)try{if(eJ){let e=document.createElement("a");e.href=v.dataUrl,e.download="quantum-cat.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}else window.open(v.dataUrl,"_blank","noopener,noreferrer");eU(),A(!0),P({title:"Image saved!",description:"10 Fish Points awarded. Share it from your gallery."}),x(!1),b(null)}catch(e){console.error("Failed to download share card:",e),P({title:"Download failed",description:"Try long-pressing the image or taking a screenshot.",variant:"destructive"})}},children:"Save image to share manually"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Tip: After saving, open your Photos or Files app and share the image to Instagram or WhatsApp."})]}):(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Preparing your card…"})]})})]})})}},6259:(e,t,a)=>{"use strict";a.d(t,{w:()=>i});var r=a(5155),n=a(2115),l=a(7268),s=a(4269);let i=n.forwardRef((e,t)=>{let{className:a,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(l.b,{ref:t,decorative:i,orientation:n,className:(0,s.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=l.b.displayName}},e=>{e.O(0,[992,416,909,634,476,554,741,239,285,961,769,915,280,491,513,441,255,358],()=>e(e.s=4673)),_N_E=e.O()}]);