(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{1075:(e,t,a)=>{"use strict";a.d(t,{D:()=>r,k:()=>l});let s=e=>"string"==typeof e?e:e.src,r={"alive-kicking":s({src:"/_next/static/media/alive_and_kicking.52aa31ca.svg",height:2201,width:2489,blurWidth:0,blurHeight:0}),"the-archivist":s({src:"/_next/static/media/archivist.5d9fb6f0.svg",height:1922,width:2469,blurWidth:0,blurHeight:0}),"curious-kitten":s({src:"/_next/static/media/curious_kitten.1b20db1b.svg",height:2402,width:2953,blurWidth:0,blurHeight:0}),"first-peek":s({src:"/_next/static/media/first_peek.ec62a04a.svg",height:2404,width:2458,blurWidth:0,blurHeight:0}),"message-keeper":s({src:"/_next/static/media/message_keeper.3f34dccd.svg",height:2376,width:2301,blurWidth:0,blurHeight:0}),"paradox-seeker":s({src:"/_next/static/media/paradox_seeker.7f0f7d4a.svg",height:2397,width:2726,blurWidth:0,blurHeight:0}),"quantum-echo":s({src:"/_next/static/media/quantum_echo.5fb0534a.svg",height:2389,width:2047,blurWidth:0,blurHeight:0}),"rest-in-pieces":s({src:"/_next/static/media/rest_in_pieces.07e0c27c.svg",height:2304,width:2508,blurWidth:0,blurHeight:0}),storyteller:s({src:"/_next/static/media/storyteller.c2197a3d.svg",height:2554,width:2326,blurWidth:0,blurHeight:0}),"viral-cat":s({src:"/_next/static/media/viral_cat.3c347195.svg",height:2406,width:2574,blurWidth:0,blurHeight:0})},l=r["first-peek"]},1629:(e,t,a)=>{"use strict";a.d(t,{P:()=>d,PointsProvider:()=>o});var s=a(5155),r=a(2115),l=a(5110),i=a(1162);let n=(0,r.createContext)(void 0),o=e=>{var t;let{children:a}=e,{user:o,userData:d,setUserData:c,storageMode:u}=(0,l.A)(),x=null!=(t=null==d?void 0:d.points)?t:0,m=(0,r.useCallback)((e,t)=>{let a=x+e;c(e=>({...null!=e?e:i.nb,points:a})),"cloud"===u&&o&&"guest"!==o&&(0,i.Ts)(o.uid,{points:a})},[x,c,u,o]),h=(0,r.useCallback)(e=>{m(-e)},[m]);return(0,s.jsx)(n.Provider,{value:{points:x,addPoints:m,spendPoints:h},children:a})},d=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("usePoints must be used within a PointsProvider");return e}},1647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(5155);a(2115);var r=a(3101),l=a(4269);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(i({variant:a}),t),...r})}},1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>h,L3:()=>p,c7:()=>m,lG:()=>o,rr:()=>f,zM:()=>d});var s=a(5155),r=a(2115),l=a(3409),i=a(6615),n=a(4269);let o=l.bL,d=l.l9,c=l.ZL;l.bm;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=l.hJ.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=l.VY.displayName},2946:e=>{"use strict";e.exports=JSON.parse('{"j":[{"id":"curious-kitten","name":"Curious Kitten","description":"Open boxes 3 days in a row.","icon":"FishBadgeIcon"},{"id":"infinite-chaser","name":"Infinite Chaser","description":"Discover and complete the Infinite Box challenge.","icon":"FishBadgeIcon"},{"id":"alive-kicking","name":"Alive & Kicking","description":"Discover your third Alive Cat.","icon":"FishBadgeIcon"},{"id":"rest-in-pieces","name":"Rest in Pieces","description":"Discover your third Dead Cat.","icon":"FishBadgeIcon"},{"id":"paradox-seeker","name":"Paradox Seeker","description":"Discover your third Paradox Cat.","icon":"FishBadgeIcon"},{"id":"the-archivist","name":"The Archivist","description":"Complete a full set of Alive, Dead, or Paradox cats.","icon":"ShareBadgeIcon"},{"id":"message-keeper","name":"Message Keeper","description":"Save 5 messages to the diary.","icon":"MessageSquareBadgeIcon"},{"id":"storyteller","name":"Storyteller","description":"Share your first outcome.","icon":"ShareBadgeIcon"},{"id":"viral-cat","name":"Viral Cat","description":"Share 5 times.","icon":"ShareBadgeIcon"},{"id":"quantum-echo","name":"Quantum Echo","description":"Reveal the same cat 3 times in a row.","icon":"MessageSquareBadgeIcon"}]}')},3047:(e,t,a)=>{"use strict";a.d(t,{m:()=>w});var s=a(5155),r=a(2115),l=a(5110),i=a(8314),n=a(4269),o=a(6948),d=a(3998),c=a(6259);let u=(0,a(3101).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(u({variant:r}),a),...l})});x.displayName="Alert";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});m.displayName="AlertTitle";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});h.displayName="AlertDescription";let p=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});p.displayName="Input";var f=a(7545),g=a(7974),b=a(6397);let v=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",...e,children:[(0,s.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,s.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,s.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.223,0-9.651-3.358-11.303-8H6.306C9.663,35.663,16.318,44,24,44z"}),(0,s.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C39.901,35.637,44,29.69,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]});function w(e){let{className:t,onSuccess:a,onGuest:u,allowGuest:w=!0}=e,{signInWithGoogle:y,signInWithEmail:j,signUpWithEmail:N,continueAsGuest:k}=(0,l.A)(),[C,_]=(0,r.useState)(null),[A,F]=(0,r.useState)(""),[S,P]=(0,r.useState)(""),[D,E]=(0,r.useState)(!1),M=async()=>{(0,i.gt)("click-1"),_(null);try{await y(),null==a||a()}catch(e){console.error("Error during Google sign-in:",e),_("An unexpected error occurred during sign-in. Please try again.")}},T=async e=>{e.preventDefault(),(0,i.gt)("click-1"),_(null),E(!0);try{await j(A,S),null==a||a()}catch(e){if("auth/user-not-found"===e.code||"auth/invalid-credential"===e.code)try{await N(A,S),null==a||a()}catch(e){"auth/email-already-in-use"===e.code?_("Incorrect password. Please try again."):"auth/weak-password"===e.code?_("Password should be at least 6 characters."):_("An error occurred. Please try again."),console.error("Error during sign-up:",e)}else _("An error occurred. Please try again."),console.error("Error during sign-in:",e)}finally{E(!1)}};return(0,s.jsx)(o.Zp,{className:(0,n.cn)("relative w-full max-w-[400px] mx-auto rounded-2xl shadow-2xl bg-card/80 backdrop-blur-sm border-border/50",t),children:(0,s.jsxs)(o.Wu,{className:"space-y-4 pt-6",children:[C&&(0,s.jsxs)(x,{variant:"destructive",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),(0,s.jsx)(m,{children:"Authentication Error"}),(0,s.jsx)(h,{className:"break-all",children:C})]}),(0,s.jsxs)("form",{onSubmit:T,className:"space-y-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(p,{type:"email",placeholder:"Enter your email...",className:"pl-10 h-12",value:A,onChange:e=>F(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(b.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(p,{type:"password",placeholder:"Enter your password...",className:"pl-10 h-12",value:S,onChange:e=>P(e.target.value),required:!0})]}),(0,s.jsx)(d.$,{type:"submit",className:"w-full h-12 text-base font-bold",disabled:D,children:D?"Continuing...":"Continue with Email"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.w,{className:"my-1"}),(0,s.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 -top-2.5 bg-card/80 px-2 text-xs text-muted-foreground",children:"OR"})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)(d.$,{onClick:M,className:"w-full h-12 text-base font-bold bg-white text-black hover:bg-neutral-200",children:[(0,s.jsx)(v,{className:"mr-2 h-6 w-6"}),"Sign in with Google"]})}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(c.w,{className:"my-1"})}),(0,s.jsx)(d.$,{onClick:()=>{(0,i.gt)("click-1"),k(),null==u||u()},className:"w-full h-12 text-base",variant:"secondary",children:"Continue as Guest"})]})]})})}},3187:(e,t,a)=>{"use strict";a.d(t,{BadgeProgressProvider:()=>u,_:()=>x});var s=a(5155),r=a(2115),l=a(4981),i=a(3588),n=a(9937),o=a(5110),d=a(1162);let c=(0,r.createContext)(void 0),u=e=>{var t,a;let{children:u}=e,{unlockBadge:x,isBadgeUnlocked:m}=(0,n.E)(),{user:h,userData:p,setUserData:f,storageMode:g}=(0,o.A)(),b=null!=(t=null==p?void 0:p.streak)?t:0,v=null!=(a=null==p?void 0:p.totalObservations)?a:0,w=(0,r.useCallback)((e,t)=>{var a,s,r,n;let o=(0,l.R)(),c=null!=p?p:d.nb,u=(null!=(a=c.totalObservations)?a:0)+1,b=c.lastObservationDate?new Date(c.lastObservationDate):null,v=null!=(s=c.streak)?s:0,w=null!=(r=c.revealHistory)?r:[];(!b||(0,i.m)(o,b)>0)&&(v=b&&1===(0,i.m)(o,b)?(null!=(n=c.streak)?n:0)+1:1);let y={celebrateImmediately:!1};3!==v||m("curious-kitten")||x("curious-kitten",y);let j=[{id:e,type:t},...w].slice(0,3);3===j.length&&j.every(e=>e.id===j[0].id)&&!m("quantum-echo")&&x("quantum-echo",y);let N={totalObservations:u,streak:v,lastObservationDate:o.toISOString(),revealHistory:j};f(e=>({...null!=e?e:d.nb,...N})),"cloud"===g&&h&&"guest"!==h&&(0,d.Ts)(h.uid,N)},[m,x,f,g,h,p]);return(0,s.jsx)(c.Provider,{value:{streak:b,totalObservations:v,recordObservation:w},children:u})},x=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useBadgeProgress must be used within an BadgeProgressProvider");return e}},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var s=a(5155),r=a(2115),l=a(7129),i=a(3101),n=a(4269);let o=(0,i.F)("theme-button inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},5409:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eh});var s=a(5155),r=a(2115),l=a(5520),i=a(3998),n=a(4269);let o=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","#3696C9","#D14002","#A240FF"],d=[{radius:72,duration:16,delay:0,size:18,glow:"rgba(54,150,201,0.85)"},{radius:56,duration:12,delay:.45,size:16,glow:"rgba(255,128,159,0.8)"},{radius:84,duration:20,delay:1,size:20,glow:"rgba(162,64,255,0.75)"},{radius:44,duration:9.5,delay:.75,size:14,glow:"rgba(169,219,74,0.7)"},{radius:96,duration:26,delay:1.4,size:22,glow:"rgba(0,45,65,0.65)"}],c=[{top:"12%",left:"18%",size:42,opacity:.6,duration:22,delay:0},{top:"28%",left:"78%",size:34,opacity:.5,duration:18,delay:2.4},{top:"66%",left:"24%",size:38,opacity:.55,duration:26,delay:1.2},{top:"74%",left:"70%",size:46,opacity:.65,duration:30,delay:.8},{top:"42%",left:"8%",size:28,opacity:.4,duration:14,delay:1.8},{top:"14%",left:"58%",size:32,opacity:.5,duration:20,delay:3.1},{top:"84%",left:"48%",size:36,opacity:.45,duration:24,delay:2.7}],u=e=>{let{title:t,badgeName:a,description:u,icon:x,onClose:m}=e,h=(0,r.useRef)(null),[p,f]=(0,r.useState)("orbit");return(0,r.useEffect)(()=>{let e=h.current;if(!e)return;let t=setInterval(()=>{let t=document.createElement("div");t.classList.add("particle");let a=10*Math.random()+6,s=Math.random()>.4?.6*Math.random()+.8:1,r=360*Math.random(),l=180*Math.random()+120,i=Math.cos(r)*l,n=Math.sin(r)*l,d=o[Math.floor(Math.random()*o.length)],c=900+1e3*Math.random(),u=360*Math.random();t.style.width="".concat(a,"px"),t.style.height="".concat(a*s,"px"),t.style.setProperty("--tx","".concat(i,"px")),t.style.setProperty("--ty","".concat(n,"px")),t.style.setProperty("--particle-color",d),t.style.setProperty("--particle-duration","".concat(c,"ms")),t.style.setProperty("--particle-rotation","".concat(u,"deg")),t.style.setProperty("--particle-radius",Math.random()>.55?"9999px":"".concat(40*Math.random()+10,"%")),Math.random()>.75&&(t.style.filter="drop-shadow(0 0 6px rgba(255,255,255,0.5))"),e.appendChild(t),setTimeout(()=>t.remove(),c+250)},70);return()=>{clearInterval(t),requestAnimationFrame(()=>{e.querySelectorAll(".particle").forEach(e=>e.remove())})}},[]),(0,r.useEffect)(()=>{let e=window.setTimeout(()=>f("merge"),3600);return()=>window.clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m]),(0,s.jsxs)("div",{ref:h,className:(0,n.cn)("fixed inset-0 z-[200] flex cursor-pointer items-center justify-center overflow-hidden px-4","bg-[#002D41]/80 backdrop-blur-lg","animate-celebration-in"),role:"dialog","aria-modal":"true",onClick:m,children:[(0,s.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(162,64,255,0.45),rgba(255,128,159,0.32)_55%,transparent_85%)] opacity-95 animate-quantum-glitter"}),(0,s.jsx)("div",{className:"absolute -inset-[140px] bg-[conic-gradient(from_60deg_at_50%_50%,rgba(255,128,159,0.6),rgba(169,219,74,0.45),rgba(162,64,255,0.5),rgba(255,128,159,0.6))] blur-3xl opacity-85 animate-quantum-field"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(169,219,74,0.35),transparent_75%)] mix-blend-screen animate-[pulse_12s_ease-in-out_infinite]"}),(0,s.jsx)("div",{className:"absolute inset-x-[-30%] bottom-[-40%] h-[70%] bg-[radial-gradient(circle_at_bottom,rgba(169,219,74,0.38),transparent_68%)] opacity-75 animate-celebration-float"}),(0,s.jsx)("div",{className:"absolute inset-x-[-35%] top-[-45%] h-[65%] bg-[radial-gradient(circle_at_top,rgba(162,64,255,0.48),transparent_72%)] opacity-80 animate-[spin_28s_linear_infinite]"}),c.map((e,t)=>(0,s.jsx)(l.A,{className:"absolute text-white/80 drop-shadow-[0_0_16px_rgba(169,219,74,0.35)]",style:{top:e.top,left:e.left,width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),opacity:e.opacity,animation:"spin ".concat(e.duration,"s linear infinite"),animationDelay:"".concat(e.delay,"s")}},"".concat(e.top,"-").concat(e.left,"-").concat(t)))]}),(0,s.jsxs)("div",{className:"relative w-full max-w-xl cursor-pointer",children:[(0,s.jsx)("div",{"aria-hidden":!0,className:"absolute -inset-[3px] rounded-[32px] bg-gradient-to-r from-[#A240FF]/80 via-[#FF809F]/80 to-[#3696C9]/80 opacity-80 blur-xl animate-celebration-glow"}),(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-[28px] border border-white/20 bg-white/90 px-10 py-12 text-center shadow-[0_40px_120px_rgba(0,0,0,0.45)] backdrop-blur-2xl dark:border-white/10 dark:bg-[#002D41]/85",children:[(0,s.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(255,128,159,0.18),transparent_65%)] opacity-80 mix-blend-screen"}),(0,s.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.22) 0%,rgba(255,255,255,0) 45%)] opacity-40 animate-[pan-bg_12s_ease-in-out_infinite]"}),(0,s.jsx)("div",{"aria-hidden":!0,className:"absolute inset-[1px] rounded-[26px] border border-white/30 opacity-50"}),(0,s.jsxs)("div",{className:"relative flex flex-col items-center gap-6 text-center",children:[(0,s.jsx)("h2",{className:"text-4xl font-headline font-bold leading-tight tracking-tight text-foreground drop-shadow-[0_6px_20px_rgba(255,128,159,0.25)]",children:t}),x&&(0,s.jsxs)("div",{className:"relative flex h-28 w-28 items-center justify-center overflow-visible rounded-full bg-[conic-gradient(from_140deg,rgba(54,150,201,0.9),rgba(255,128,159,0.85),rgba(169,219,74,0.85),rgba(54,150,201,0.9))] text-white shadow-[0_20px_56px_rgba(54,150,201,0.45)] animate-celebration-float",children:[(0,s.jsx)("div",{"aria-hidden":!0,className:(0,n.cn)("pointer-events-none absolute -inset-14","merge"===p?"animate-quantum-collapse":"animate-quantum-glitter"),children:d.map((e,t)=>(0,s.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full border border-white/20 animate-[spin_14s_linear_infinite]",style:{width:"".concat(2*e.radius+20,"px"),height:"".concat(2*e.radius+20,"px"),animationDuration:"".concat(e.duration,"s"),animationDelay:"".concat(e.delay,"s"),borderColor:e.glow,boxShadow:"0 0 40px ".concat(e.glow)},children:(0,s.jsx)(l.A,{className:"absolute left-1/2 top-0 -translate-x-1/2 text-white",style:{width:"".concat(e.size+4,"px"),height:"".concat(e.size+4,"px"),filter:"drop-shadow(0 0 16px ".concat(e.glow,")")}})},"".concat(e.radius,"-").concat(t)))}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border border-white/40 opacity-80 mix-blend-screen"}),(0,s.jsx)("div",{className:"absolute -inset-[14px] rounded-full bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.5),transparent_65%)] blur-xl opacity-70"}),(0,s.jsx)("div",{className:"absolute -inset-[8px] rounded-full border border-white/20 opacity-60 animate-celebration-pulse"}),(0,s.jsx)("div",{className:(0,n.cn)("relative z-10 flex h-20 w-20 items-center justify-center rounded-full bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.4),rgba(54,150,201,0.35)_60%,rgba(162,64,255,0.25))] text-5xl text-white shadow-[0_0_35px_rgba(54,150,201,0.55)] animate-quantum-core transition-transform duration-500","merge"===p&&"scale-110"),children:x})]}),(0,s.jsxs)("div",{className:"flex w-full max-w-md flex-col items-center gap-3 text-center",children:[(0,s.jsx)("h3",{className:"text-3xl font-headline font-semibold tracking-tight text-foreground sm:text-4xl",children:a}),(0,s.jsx)("p",{className:"mx-auto max-w-md text-base text-muted-foreground/90 sm:text-lg",children:u})]}),(0,s.jsx)("div",{className:"h-px w-full max-w-[220px] bg-gradient-to-r from-transparent via-white/60 to-transparent opacity-80"}),(0,s.jsx)(i.$,{type:"button",onClick:m,className:"mt-4 w-full max-w-[220px] text-base font-semibold uppercase tracking-wide shadow-[0_12px_35px_rgba(54,150,201,0.35)]",children:"Collect"})]})]})]})]})};var x=a(5110),m=a(1834),h=a(1647);let p={"box-opens":"You have opened the box a few times now. Let's keep those discoveries safe.",points:"You've earned a stash of Fish Points. Save them before another timeline steals them.",customize:"You're about to remix the box. Save your layouts across every universe.",gallery:"Your gallery is filling up. Lock it in before the quantum fog rolls in."};function f(){let{loginPromptOpen:e,loginPromptReason:t,dismissLoginPrompt:a,openLoginModal:l,storageMode:o}=(0,x.A)(),d=(0,r.useMemo)(()=>t?p[t]:null,[t]);return"cloud"===o?null:(0,s.jsx)(m.lG,{open:e,onOpenChange:e=>{e||a()},children:(0,s.jsxs)(m.Cf,{className:"max-w-md rounded-2xl",children:[(0,s.jsxs)(m.c7,{children:[(0,s.jsx)(h.E,{variant:"outline",className:"w-fit mb-2 text-xs font-semibold",children:"Guest Mode"}),(0,s.jsx)(m.L3,{className:"text-lg sm:text-xl",children:"\uD83D\uDC3E Want to keep your cats safe in this reality forever?"}),(0,s.jsx)(m.rr,{children:"Save your progress to never lose your collection, badges, and points."})]}),d&&(0,s.jsx)("p",{className:(0,n.cn)("text-sm text-muted-foreground","mt-2"),children:d}),(0,s.jsxs)(m.Es,{className:"flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[(0,s.jsx)(i.$,{variant:"ghost",onClick:a,className:"w-full sm:w-auto",children:"Not Now"}),(0,s.jsx)(i.$,{onClick:()=>l(null!=t?t:void 0),className:"w-full sm:w-auto",children:"Save My Cats"})]})]})})}var g=a(3047);function b(){let{loginModalOpen:e,closeLoginModal:t,loginPromptReason:a}=(0,x.A)(),l=(0,r.useMemo)(()=>{switch(a){case"box-opens":return"Triggered by multiple box opens";case"points":return"Triggered by reaching 10+ points";case"customize":return"Triggered while customizing the box";case"gallery":return"Triggered from the gallery";default:return null}},[a]);return(0,s.jsx)(m.lG,{open:e,onOpenChange:e=>!e&&t(),children:(0,s.jsxs)(m.Cf,{className:"max-w-md rounded-2xl",children:[(0,s.jsxs)(m.c7,{className:"space-y-2",children:[(0,s.jsx)(h.E,{variant:"outline",className:"w-fit",children:"Sync Available"}),(0,s.jsx)(m.L3,{className:"text-lg sm:text-xl",children:"Sign in to keep your collection everywhere"}),(0,s.jsx)(m.rr,{children:"Your points, cats, favourites, and layout preferences will stay in sync across every device once you log in."}),l&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:l})]}),(0,s.jsx)(g.m,{className:"shadow-none border border-border/50 bg-card",allowGuest:!1,onSuccess:t})]})})}var v=a(9937),w=a(1075),y=a(2946),j=a(5239),N=a(8274),k=a(1140),C=a(7783),_=a(3187),A=a(1629),F=a(6767);function S(e){var t,a,r;let{className:l}=e,{user:i,displayName:o}=(0,x.A)(),d="object"==typeof i&&null!==i&&"uid"in i?i:null,c=!d,u=(null==o?void 0:o.trim())||(null==d||null==(t=d.displayName)?void 0:t.trim())||(null==d||null==(r=d.email)||null==(a=r.split("@")[0])?void 0:a.trim())||null;return(0,s.jsx)("span",{className:(0,n.cn)("inline-flex items-center rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors",c?"border-border/60 bg-muted/30 text-muted-foreground":"border-primary/25 bg-primary/10 text-primary",l),children:c?"Guest":null!=u?u:"Guest"})}var P=a(1138);let D=P.bL,E=P.l9,M=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...i}=e;return(0,s.jsx)(P.ZL,{children:(0,s.jsx)(P.UC,{ref:t,align:r,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});function T(){var e,t;let{unlockedBadges:a}=(0,v.E)(),{streak:l}=(0,_._)(),{points:o}=(0,A.P)(),{user:d,displayName:c,logout:u,openLoginModal:m}=(0,x.A)(),[h,p]=r.useState(!1),f=!d||"guest"===d,g="object"==typeof d&&d&&null!=(e=d.email)?e:null,b=f?"Guest Mode":null!=(t=null!=g?g:c)?t:"Signed in user",w=r.useCallback(()=>{m(),p(!1)},[m]),y=r.useCallback(async()=>{await u(),p(!1)},[u]),j=[{icon:N.A,value:a.length,label:"Badges unlocked",iconClass:"text-yellow-500"},{icon:k.A,value:l,label:"Daily streak",iconClass:"text-red-500"},{icon:C.A,value:o,label:"Fish points",iconClass:"text-sky-500"}];return(0,s.jsx)(F.Bc,{children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground",children:j.map(e=>{let{icon:t,value:a,label:r,iconClass:l}=e;return(0,s.jsxs)(F.m_,{children:[(0,s.jsx)(F.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[(0,s.jsx)(t,{className:(0,n.cn)("h-4 w-4",l)}),(0,s.jsx)("span",{children:a})]})}),(0,s.jsx)(F.ZI,{children:(0,s.jsx)("p",{children:r})})]},r)})}),(0,s.jsx)("div",{className:"flex items-center justify-end ml-auto",children:(0,s.jsxs)(D,{open:h,onOpenChange:p,children:[(0,s.jsx)(E,{asChild:!0,children:(0,s.jsx)("button",{type:"button",className:"rounded-full focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:(0,s.jsx)(S,{className:"cursor-pointer select-none"})})}),(0,s.jsxs)(M,{align:"end",className:"w-60 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"User"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-foreground break-words",children:b})]}),(0,s.jsx)(i.$,{onClick:f?w:y,variant:f?"default":"outline",className:"w-full",children:f?"Sign In":"Sign Out"})]})]})})]})})}M.displayName=P.UC.displayName;var z=a(2619),B=a.n(z),I=a(63),O=a(8595),R=a(6379),q=a(2158),H=a(3063),G=a(8314);let L=[{href:"/home",icon:O.A,label:"Home",hoverColorClass:"hover:text-sky-400",activeColorClass:"text-sky-400"},{href:"/gallery",icon:R.A,label:"Gallery",hoverColorClass:"hover:text-fuchsia-400",activeColorClass:"text-fuchsia-400"},{href:"/awards",icon:N.A,label:"Awards",hoverColorClass:"hover:text-pink-400",activeColorClass:"text-pink-400"},{href:"/customize",icon:q.A,label:"Customise",hoverColorClass:"hover:text-amber-400",activeColorClass:"text-amber-400"},{href:"/settings",icon:H.A,label:"Settings",hoverColorClass:"hover:text-emerald-400",activeColorClass:"text-emerald-400"}];function W(e){let{onSecretCustomizeClick:t}=e,a=(0,I.usePathname)(),l=r.useRef({count:0,lastClickTs:0}),i=r.useCallback(()=>{let e=Date.now(),{count:a,lastClickTs:s}=l.current,r=e-s<=800?a+1:1;r>=3?(l.current={count:0,lastClickTs:0},null==t||t()):l.current={count:r,lastClickTs:e}},[t]);return(0,s.jsx)("div",{className:"mt-auto w-full",children:(0,s.jsx)(F.Bc,{delayDuration:100,children:(0,s.jsx)("nav",{className:"flex w-full items-center justify-evenly py-3",children:L.map(e=>{let t=e.icon,r=a===e.href||a.startsWith("".concat(e.href,"/"));return(0,s.jsxs)(F.m_,{children:[(0,s.jsx)(F.k$,{asChild:!0,children:(0,s.jsxs)(B(),{href:e.href,onClick:()=>{(0,G.gt)("click-1"),"/customize"===e.href&&i()},className:(0,n.cn)("group flex h-12 w-12 items-center justify-center rounded-full text-muted-foreground transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background hover:scale-110",e.hoverColorClass,r&&(0,n.cn)(e.activeColorClass,"scale-110")),"aria-label":e.label,children:[(0,s.jsx)(t,{className:(0,n.cn)("h-5 w-5 transition-transform duration-200 group-hover:scale-125",r&&"scale-125")}),(0,s.jsx)("span",{className:"sr-only",children:e.label})]})}),(0,s.jsx)(F.ZI,{side:"top",children:e.label})]},e.label)})})})})}var $=a(9031),V=a(4178),U=a(1480),Y=a(257),Z=a(311),K=a(6419),Q=a(1548),J=a(3037),X=a(2649),ee=a(9338),et=a(4972),ea=a(6711),es=a(6397),er=a(9179),el=a(7304),ei=a(2970),en=a(7656),eo=a(3671),ed=a(1910);let ec=[{id:"apple",icon:$.A,effect:"apple",color:"text-[#FF809F]",label:"Quantum Apple"},{id:"tree",icon:V.A,effect:"tree",color:"text-[#A9DB4A]",label:"Temporal Tree"},{id:"atom",icon:l.A,effect:"atom",color:"text-[#3696C9]",label:"Atomic Surge"},{id:"zap",icon:U.A,effect:"neutral",color:"text-[#D14002]",label:"Voltage Spark"},{id:"flame",icon:Y.A,effect:"neutral",color:"text-[#FF809F]",label:"Plasma Flame"},{id:"gamepad",icon:Z.A,effect:"neutral",color:"text-[#A240FF]",label:"Game Loop"},{id:"trophy",icon:K.A,effect:"neutral",color:"text-[#FF809F]",label:"Mini Trophy"},{id:"crown",icon:Q.A,effect:"neutral",color:"text-[#A240FF]",label:"Royal Shift"},{id:"rocket",icon:J.A,effect:"neutral",color:"text-[#3696C9]",label:"Rocket Jump"},{id:"star",icon:X.A,effect:"neutral",color:"text-[#A9DB4A]",label:"Nova Star"},{id:"sparkles",icon:ee.A,effect:"neutral",color:"text-[#A240FF]",label:"Spark Swirl"},{id:"ghost",icon:et.A,effect:"neutral",color:"text-[#A9DB4A]",label:"Ghost Echo"},{id:"fish",icon:C.A,effect:"neutral",color:"text-[#3696C9]",label:"Fish Byte"},{id:"heart",icon:ea.A,effect:"neutral",color:"text-[#FF809F]",label:"Heart Pulse"},{id:"key",icon:es.A,effect:"neutral",color:"text-[#3696C9]",label:"Chrono Key"},{id:"gift",icon:er.A,effect:"neutral",color:"text-[#FF809F]",label:"Gift Drop"},{id:"gem",icon:el.A,effect:"neutral",color:"text-[#A240FF]",label:"Gem Shard"},{id:"candy",icon:ei.A,effect:"neutral",color:"text-[#FF809F]",label:"Candy Burst"},{id:"candycane",icon:en.A,effect:"neutral",color:"text-[#FF809F]",label:"Peppermint Spin"},{id:"drumstick",icon:eo.A,effect:"neutral",color:"text-[#D14002]",label:"Snack Attack"},{id:"bolt",icon:ed.A,effect:"neutral",color:"text-[#3696C9]",label:"Lightning Loop"}],eu=e=>{let t=e?ec.filter(t=>t.id!==e):ec;return t[Math.floor(Math.random()*t.length)]};function ex(e){let{onComplete:t,onDismiss:a}=e,[l,o]=(0,r.useState)(25e3),[d,c]=(0,r.useState)(0),[u,x]=(0,r.useState)(0),[m,h]=(0,r.useState)(0),[p,f]=(0,r.useState)(0),[g,b]=(0,r.useState)(0),[v,w]=(0,r.useState)(()=>eu()),[y,j]=(0,r.useState)("playing"),[N,k]=(0,r.useState)("Tap the Quantum Box to reel in Fish Points!"),[C,_]=(0,r.useState)(null),A=(0,r.useMemo)(()=>Math.max(0,Math.min(100,l/25e3*100)),[l]),F=(0,r.useCallback)(()=>{"playing"===y&&((0,G.gt)("celebration-magic"),_({totalClicks:d,applesCollected:m,atomsActivated:g,treesTriggered:p,fishPointsAwarded:Math.max(0,u)}),j("result"))},[y,d,m,g,p,u]);(0,r.useEffect)(()=>{if("playing"!==y)return;let e=window.setInterval(()=>{o(e=>{if(e<=0)return 0;let t=e-100;return t<=0?(F(),0):t})},100);return()=>window.clearInterval(e)},[y,F]),(0,r.useEffect)(()=>{if("playing"!==y)return;let e=window.setInterval(()=>{w(e=>eu(e.id))},1e3);return()=>window.clearInterval(e)},[y]);let S=(0,r.useCallback)(e=>{switch(e.effect){case"apple":x(e=>e+10),h(e=>e+1),k("Crunch! Quantum apple scored +10 Fish Points.");break;case"tree":f(e=>e+1),o(e=>Math.max(0,e-5e3)),k("Oops! Festive tree stole 5 seconds. Stay sharp!");break;case"atom":b(e=>e+1),o(e=>Math.min(25e3,e+3e3)),k("Atomic surge! Bonus time unlocked.");break;default:x(e=>e+2),k("".concat(e.label," adds a tiny spark (+2 Fish Points). Keep tapping!"))}},[]),P=(0,r.useCallback)(()=>{"playing"===y&&((0,G.gt)("box-shake"),c(e=>e+1),S(v),w(e=>eu(e.id)))},[y,v,S]),D=(0,r.useCallback)(()=>{(0,G.gt)("haptic-3"),a()},[a]),E=(0,r.useCallback)(()=>{C&&t(C)},[t,C]);return(0,s.jsx)("div",{className:"fixed inset-0 z-[130] flex items-center justify-center bg-[#002D41]/80 px-4 backdrop-blur-2xl",onClick:D,children:(0,s.jsxs)("div",{className:"relative w-full max-w-3xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-[#FF809F] via-[#A240FF] to-[#3696C9] shadow-[0_40px_220px_rgba(0,0,0,0.7)]",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-70 mix-blend-screen",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_left,_rgba(255,255,255,0.35),_transparent_60%)]"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_bottom_right,_rgba(255,255,255,0.25),_transparent_70%)]"})]}),(0,s.jsxs)("div",{className:"relative space-y-8 px-8 py-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Infinite Box Challenge"}),(0,s.jsx)("h2",{className:"font-headline text-4xl drop-shadow-lg",children:"Vibrant Velocity Mode"})]}),(0,s.jsx)(i.$,{variant:"ghost",size:"icon",onClick:D,className:"text-white/70 transition hover:text-white","aria-label":"Close Infinite Box Challenge",children:"✕"})]}),"playing"===y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-white/80",children:[(0,s.jsx)("span",{children:"Time Remaining"}),(0,s.jsxs)("span",{className:"font-semibold text-white",children:[(l/1e3).toFixed(1),"s"]})]}),(0,s.jsx)("div",{className:"h-3 w-full overflow-hidden rounded-full bg-white/20",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-[#A9DB4A] via-[#FF809F] to-[#A240FF] transition-all",style:{width:"".concat(A,"%")}})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-2xl border border-white/20 bg-white/10 p-6 text-center backdrop-blur-lg",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-[0.45em] text-white/60",children:"Current Icon"}),(0,s.jsx)("div",{className:(0,n.cn)("flex h-32 w-32 items-center justify-center rounded-3xl border-4 border-white/40 bg-white/10 shadow-2xl transition-transform duration-200","hover:scale-105 active:scale-95 cursor-pointer"),onClick:P,role:"button",tabIndex:0,"aria-label":"Activate ".concat(v.label),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),P())},children:(0,s.jsx)(v.icon,{className:(0,n.cn)("h-20 w-20 drop-shadow-[0_0_22px_rgba(255,255,255,0.45)]",v.color),strokeWidth:1.25})}),(0,s.jsx)("div",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:v.label}),(0,s.jsx)("p",{className:"text-sm text-white/85",children:N}),(0,s.jsx)(i.$,{onClick:P,className:"mt-2 w-full bg-gradient-to-r from-[#FF809F] via-[#A240FF] to-[#3696C9] font-semibold text-white shadow-lg transition hover:brightness-110",children:"Tap the Quantum Box"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-center text-sm",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#A240FF]/40 p-4 shadow-lg",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Fish Points"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-white drop-shadow-lg",children:u})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#3696C9]/40 p-4 shadow-lg",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Clicks"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-white drop-shadow-lg",children:d})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#A9DB4A]/40 p-4 shadow-lg",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Apples"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-white drop-shadow-lg",children:m})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#FF809F]/40 p-4 shadow-lg",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Atoms"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-white drop-shadow-lg",children:g})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#D14002]/60 p-4 shadow-lg",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Trees Hit"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-white drop-shadow-lg",children:p})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#002D41]/70 p-4 text-left text-sm text-white/75",children:[(0,s.jsx)("p",{className:"font-semibold uppercase tracking-[0.35em] text-white/60",children:"Quick Rules"}),(0,s.jsxs)("ul",{className:"mt-3 space-y-1.5 text-xs leading-relaxed",children:[(0,s.jsx)("li",{children:"• Apples give +10 Fish Points instantly."}),(0,s.jsx)("li",{children:"• Christmas trees steal 5 seconds — wait for a new icon if you spot one."}),(0,s.jsx)("li",{children:"• Atom icons grant a 3 second time refund."}),(0,s.jsx)("li",{children:"• All other icons add a small +2 Fish Point spark."})]})]})]})]})]}),"result"===y&&C&&(0,s.jsxs)("div",{className:"space-y-6 rounded-2xl border border-white/15 bg-[#002D41]/70 p-6 text-white/90 backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.45em] text-white/60",children:"Run Complete"}),(0,s.jsx)("h3",{className:"mt-2 font-headline text-4xl text-white drop-shadow-lg",children:"Vivid Spoils Secured"}),(0,s.jsxs)("p",{className:"mt-3 text-sm text-white/80",children:["You tapped ",C.totalClicks," times, caught ",C.applesCollected," apples, dodged ",C.treesTriggered," trees, and activated ",C.atomsActivated," atoms for a total of ",C.fishPointsAwarded," Fish Points."]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#A240FF]/40 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Fish Points"}),(0,s.jsx)("p",{className:"mt-2 text-4xl font-bold text-white drop-shadow-lg",children:C.fishPointsAwarded})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#3696C9]/40 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Clicks"}),(0,s.jsx)("p",{className:"mt-2 text-4xl font-bold text-white drop-shadow-lg",children:C.totalClicks})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#A9DB4A]/40 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Apples"}),(0,s.jsx)("p",{className:"mt-2 text-4xl font-bold text-white drop-shadow-lg",children:C.applesCollected})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/20 bg-[#FF809F]/40 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-white/70",children:"Atoms"}),(0,s.jsx)("p",{className:"mt-2 text-4xl font-bold text-white drop-shadow-lg",children:C.atomsActivated})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row",children:[(0,s.jsx)(i.$,{className:"flex-1 bg-gradient-to-r from-[#FF809F] via-[#A240FF] to-[#3696C9] font-semibold text-white shadow-xl transition hover:brightness-110",onClick:E,children:"Collect Fish Points"}),(0,s.jsx)(i.$,{variant:"outline",className:"flex-1 border-white/30 text-white hover:bg-white/10",onClick:D,children:"Dismiss"})]})]})]})]})})}var em=a(5894);function eh(e){let{children:t}=e,{celebrationBadgeId:a,collectBadge:l,isBadgeUnlocked:i,unlockBadge:o}=(0,v.E)(),[d,c]=r.useState(null),[x,m]=r.useState("idle"),[h,p]=r.useState(!1),{addPoints:g}=(0,A.P)(),{toast:N}=(0,em.dj)(),k=r.useCallback(()=>{a&&l(a),m("finished"),c(null)},[a,l]);r.useEffect(()=>{var e;if(!a)return;let t=y.j.find(e=>e.id===a);if(!t)return;let r=null!=(e=w.D[t.id])?e:w.k,l=()=>{c({title:"Badge Unlocked",badgeName:t.name,description:t.description,icon:r?(0,s.jsx)(j.default,{src:r,alt:"".concat(t.name," badge icon"),width:64,height:64,className:"w-16 h-16"}):void 0}),m("celebrating")};"function"==typeof queueMicrotask?queueMicrotask(l):setTimeout(l,0);let i=setTimeout(k,4e3);return()=>clearTimeout(i)},[a,k]);let C=r.useCallback(()=>{p(!0)},[]),_=r.useCallback(e=>{e.fishPointsAwarded>0?(g(e.fishPointsAwarded),N({title:"Infinite Box complete!",description:"You earned ".concat(e.fishPointsAwarded," Fish Points.")})):N({title:"Infinite Box complete!",description:"No bonus Fish Points this time, but the Quantum Cat is impressed."}),i("infinite-chaser")||o("infinite-chaser"),p(!1)},[g,N,i,o]),F=r.useCallback(()=>{p(!1)},[]);return(0,s.jsxs)("div",{className:(0,n.cn)("relative min-h-screen w-full bg-background",("celebrating"===x||"spotlight"===x)&&"bg-black"),children:[(0,s.jsx)("div",{className:"mx-auto flex w-full max-w-[400px] h-[850px] flex-col items-center p-4",children:(0,s.jsxs)("main",{className:"relative flex flex-col w-full h-full rounded-[32px] border border-border/40 bg-card/95 px-4 pb-10 pt-6 shadow-[0_25px_70px_-35px_rgba(79,70,229,0.45)] backdrop-blur-sm sm:px-6 sm:pb-12 sm:pt-8",children:[(0,s.jsx)(T,{}),(0,s.jsx)("div",{className:"mt-6 flex w-full flex-col gap-6 flex-grow",children:t}),(0,s.jsx)(W,{onSecretCustomizeClick:C})]})}),"celebrating"===x&&d&&(0,s.jsx)(u,{title:d.title,badgeName:d.badgeName,description:d.description,icon:d.icon,onClose:k}),(0,s.jsx)(f,{}),(0,s.jsx)(b,{}),h&&(0,s.jsx)(ex,{onComplete:_,onDismiss:F})]})}},5650:(e,t,a)=>{Promise.resolve().then(a.bind(a,5409))},5894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),n.forEach(e=>{e(o)})}function c(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6259:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(5155),r=a(2115),l=a(7268),i=a(4269);let n=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...o}=e;return(0,s.jsx)(l.b,{ref:t,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...o})});n.displayName=l.b.displayName},6767:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>n,ZI:()=>c,k$:()=>d,m_:()=>o});var s=a(5155),r=a(2115),l=a(6852),i=a(4269);let n=l.Kq,o=l.bL,d=l.l9,c=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});c.displayName=l.UC.displayName},6948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>c});var s=a(5155),r=a(2115),l=a(4269);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});c.displayName="CardFooter"},9937:(e,t,a)=>{"use strict";a.d(t,{BadgeProvider:()=>h,E:()=>p});var s,r=a(5155),l=a(2115),i=a(8314),n=a(5110),o=a(1162),d=a(2946);let c=(0,l.createContext)(void 0),u=new Set((null!=(s=d.j)?s:[]).map(e=>e.id)),x={"7-day-streak":"curious-kitten","30-day-streak":"curious-kitten","100-opens":null,"365-opens":null,"10-messages-saved":"message-keeper","50-messages-saved":"message-keeper","first-share":"storyteller","10-shares":"viral-cat","skin-changer":null,"double-collapse":null,"improbable-streak":null,"cosmic-alignment":null,"undead-luck":null,"100-fish-points":null,"the-collector":null},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.from(new Set(e.map(e=>{if(Object.prototype.hasOwnProperty.call(x,e)){var t;return null!=(t=x[e])?t:null}return e}).filter(e=>!!e&&u.has(e))))},h=e=>{let{children:t}=e,[a,s]=(0,l.useState)(null),[d,h]=(0,l.useState)([]),p=(0,l.useRef)([]),{user:f,userData:g,setUserData:b,storageMode:v}=(0,n.A)();(0,l.useEffect)(()=>{p.current=d},[d]);let w=(0,l.useMemo)(()=>(null==g?void 0:g.unlockedBadges)||[],[null==g?void 0:g.unlockedBadges]),y=(0,l.useMemo)(()=>m(w),[w]),j=(0,l.useMemo)(()=>!((e,t)=>{if(e.length!==t.length)return!1;let a=[...e].sort(),s=[...t].sort();return a.every((e,t)=>e===s[t])})(w,y),[w,y]),N=(0,l.useMemo)(()=>{var e;return null!=(e=d[0])?e:null},[d]);(0,l.useEffect)(()=>{if(!j)return;let e=()=>{b(e=>({...null!=e?e:o.nb,unlockedBadges:y})),"cloud"===v&&f&&"guest"!==f&&(0,o.Ts)(f.uid,{unlockedBadges:y})};"function"==typeof queueMicrotask?queueMicrotask(e):setTimeout(e,0)},[j,y,b,v,f]);let k=(0,l.useCallback)(e=>{e&&s(t=>t===e?t:((0,i.gt)("badge-unlocked"),e))},[]),C=(0,l.useCallback)(()=>{let e=p.current[0];e&&k(e)},[k]),_=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{celebrateImmediately:!0},a=Object.prototype.hasOwnProperty.call(x,e)?x[e]:e;if(!(!a||!u.has(a)||y.includes(a))&&!p.current.includes(a)&&(h(e=>{let t=[...e,a];return p.current=t,t}),t.celebrateImmediately)){let e=()=>C();"function"==typeof queueMicrotask?queueMicrotask(e):setTimeout(e,0)}},[C,y]),A=(0,l.useCallback)(e=>{if(!e||!u.has(e))return;h(t=>{let a=t.filter(t=>t!==e);return p.current=a,a}),s(t=>t===e?null:t);let t=null,a=!1;b(s=>{var r;let l=null!=s?s:o.nb,i=null!=(r=l.unlockedBadges)?r:[];return i.includes(e)?(t=i,l):(t=[...i,e],a=!0,{...l,unlockedBadges:t})}),a&&t&&"cloud"===v&&f&&"guest"!==f&&(0,o.Ts)(f.uid,{unlockedBadges:t})},[b,v,f]),F=(0,l.useCallback)(e=>y.includes(e),[y]);return(0,r.jsx)(c.Provider,{value:{unlockedBadges:y,unlockBadge:_,isBadgeUnlocked:F,lastUnlockedBadgeId:N,celebrationBadgeId:a,collectBadge:A,triggerCelebration:C},children:t})},p=()=>{let e=(0,l.useContext)(c);if(void 0===e)throw Error("useBadges must be used within a BadgeProvider");return e}}},e=>{e.O(0,[992,416,909,634,476,554,741,239,852,630,961,441,255,358],()=>e(e.s=5650)),_N_E=e.O()}]);